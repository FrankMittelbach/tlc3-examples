%%
%% The LaTeX Companion, 3ed
%%
%% Example 6-9-3 on page I-500 in "Table data in external files for reuse".
%%
%% Copyright (C) 2022 Frank Mittelbach
%%
%% It may be distributed and/or modified under the conditions
%% of the LaTeX Project Public License, either version 1.3c
%% of this license or (at your option) any later version.
%%
%% See https://www.latex-project.org/lppl.txt for details.
%%

\documentclass{tlc3exa}
\pagestyle{empty}
\setcounter{page}{6}
\setlength\textwidth{207.0pt}

\begin{filecontents}[overwrite]{cities.kvt}
 \Row{city=Mainz, country=Germany, people=0.2 mil, visited=\emph{home town}}
 \Row{city=London,   country=UK,   people=8.9 mil, visited=yes}
 \Row[style=H]{city=New York, country=USA,  people=8.4 mil, visited=planned}
 \Row[style=H]{city=Paris, country=France, people=2.1 mil}
\end{filecontents}

%StartShownPreambleCommands
\usepackage{keyvaltable}   \kvtNewRowStyle{H}{}
\NewKeyValTable{overview}{city: ; country: ; people: ; visited: hidden}
\NewKeyValTable{visits}{country: ; city: ; people: hidden; visited: align=c}
%StopShownPreambleCommands

\begin{document}
\ShowKeyValTableFile[shape=onepage,valign=t]{overview}{cities.kvt} \quad
\kvtRenewRowStyle{H}{hidden}     % hide the H rows in next table
\ShowKeyValTableFile[shape=onepage,nobg,valign=t]{visits}{cities.kvt}
\end{document}
